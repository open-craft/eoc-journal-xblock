{% load i18n %}
<div class="eoc-journal-block">
  <div class="title">
    <h3>{{ display_name }}</h3>
  </div>

  {% if display_user_metrics %}
  <div class="progress-metrics">
    <div class="title">
      <h4>{% trans "Progress" %}</h4>
      <p>

      {% if progress %}

      {% blocktrans with percentage=progress.user tag_start='<span data-progress-name="user">' tag_end='</span>' %}
      You are {{ tag_start }}{{ percentage }}{{ tag_end }}% of the way through
      the course based on completion of modules within lessons.
      {% endblocktrans %}

      {% blocktrans with percentage=progress.cohort_average tag_start='<span data-progress-name="cohort">' tag_end='</span>' %}
      The cohort average is {{ tag_start }}{{ percentage }}{{ tag_end }}%.
      {% endblocktrans %}

      {% else %}
      {% trans "Progress data is not available." %}
      {% endif %}
      </p>
    </div>
  </div>

  <div class="proficiency-metrics">
    <div class="title">
      <h4>{% trans "Proficiency" %}</h4>
      <p>

      {% if proficiency %}

      {% blocktrans with proficiency=proficiency.user tag_start='<span data-proficiency-name="user">' tag_end='</span>' %}
      Your current proficiency score is {{ tag_start }}{{ proficiency }}{{ tag_end }}% following completion of graded
      items in this course.
      {% endblocktrans %}

      {% blocktrans with proficiency=proficiency.cohort_average tag_start='<span data-proficiency-name="cohort">' tag_end='</span>' %}
      The cohort average is {{ tag_start }}{{ proficiency }}{{ tag_end }}%.
      {% endblocktrans %}

      {% else %}
      {% trans "Proficiency data is not available." %}
      {% endif %}
      </p>
    </div>
  </div>

  <div class="engagement-metrics">
    <div class="title">
      <h4>{% trans "Engagement" %}</h4>

      <p>
      {% if engagement %}

      {% blocktrans with score=engagement.user_score tag_start='<span data-engagement-name="user">' tag_end='</span>' %}
      Your current engagement score is {{ tag_start }}{{ score }}{{ tag_end }}
      based on your engagement interactions with other participants in your cohort in the discussion forums.
      {% endblocktrans %}

      {% blocktrans with score=engagement.cohort_score tag_start='<span data-engagement-name="cohort">' tag_end='</span>' %}
      The cohort average is {{ tag_start }}{{ score }}{{ tag_end }}.
      {% endblocktrans %}

      <table>
        <thead>
          <tr>
            <th>{% trans "Measured engagement" %}</th>
            <th>{% trans "Stats" %}</th>
          </tr>
        </thead>

        <tbody>
          <tr>
            <td>{% trans "Number of New Posts you created" %}</td>
            <td data-point-name="new_posts">{{ engagement.new_posts }}</td>
          </tr>

          <tr>
            <td>{% trans "Number of Replies you made to other posts" %}</td>
            <td data-point-name="total_replies">{{ engagement.total_replies }}</td>
          </tr>

          <tr>
            <td>{% trans "Number of Comments Generated by your posts" %}</td>
            <td data-point-name="comments_generated">{{ engagement.comments_generated }}</td>
          </tr>

          <tr>
            <td>{% trans "Number of Upvotes your posts have received" %}</td>
            <td data-point-name="upvotes">{{ engagement.upvotes }}</td>
          </tr>

          <tr>
            <td>{% trans "Number of your posts being Followed" %}</td>
            <td data-point-name="posts_followed">{{ engagement.posts_followed }}</td>
          </tr>
        </tbody>
      </table>
      {% else %}
      {% trans "Engagement data is not available." %}
      {% endif %}
      </p>
    </div>

  </div>
  {% endif %}

  {% if answer_sections %}

  {% if display_answers %}
  <div class="eoc-selected-answers">
    {% for section in answer_sections %}
    <section class="eoc-selected-answers-section">
      <h4>{{ section.name }}</h4>
      {% for q in section.questions %}
      <div class="eoc-selected-answer">
        <h5>{{ q.question }}</h5>
        <p>{{ q.answer }}</p>
      </div>
      {% endfor %}
    </section>
    {% endfor %}
  </div>
  {% endif %}

  <div class="eoc-pdf-report">
    <div class="title">
      <h4>{{ pdf_report_link_heading }}</h4>
    </div>
    <p>
      <a class="pdf-report-link" target="_blank" href="{{ pdf_report_url }}">
        <span class="fa fa-file-text-o" aria-hidden="true"></span>
        {{ pdf_report_link_text }}
      </a>
    </p>
  </div>
  {% endif %}

  {% if display_key_takeaways %}
  <div class="eoc-key-takeaways">
    <div class="title">
      <h4>Key Takeaways</h4>
    </div>
    {% if key_takeaways_pdf_url %}
    <p>
      <a class="key-takeaways-link" target="_blank" href="{{ key_takeaways_pdf_url }}">
        <span class="fa fa-file-text-o" aria-hidden="true"></span>
        {% trans "Key Takeaways" %}
      </a>
    </p>
    {% else %}
    <p>{% trans "Key Takeaways PDF not available at this time." %}</p>
    {% endif %}
  </div>
  {% endif %}
</div>
